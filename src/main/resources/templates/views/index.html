<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/weblayout}"
      xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <title>Trang chủ</title>
</head>

<body>
<div layout:fragment="content" class="myContainer">
    <div class="row">
        <div class="col-lg-3 h-100" id="leftKH">
            <div class="card" id="formLeft">
                <div class="h-100 w-100">
                    <div id="sidebar-menu">
                        <ul class="list-unstyled" id="side-menu">
                            <li>
                                <a class="has-arrow waves-effect">
                                    <span> Nhóm đối tác giao hàng </span>
                                </a>
                                <ul class="sub-menu" style="padding: 0 10px 0 20px;">
                                    <div class="row">
                                        <div class="col-lg-10">
                                            <select class="form-select myInputNoBorder">
                                                <option selected>Tất cả nhóm</option>
                                                <option value="1">Thêm nhóm</option>
                                                <option value="2">Nhóm 1</option>
                                                <option value="3">Nhóm 2</option>
                                            </select>
                                        </div>
                                        <div class="col-lg-2">
                                            <i class="fas fa-edit"></i>
                                        </div>
                                    </div>
                                </ul>
                            </li>
                            <li>
                                <a class="has-arrow waves-effect">
                                    <span>Tổng phí giao hàng </span>
                                </a>
                                <ul class="sub-menu" style="padding: 0 10px 0 30px;">
                                    <div class="row">
                                        <label for="example-text-input" class="col-sm-4 col-form-label font-size-14">Từ:</label>
                                        <div class="col-sm-8">
                                            <input class="form-control myInputNoBorder" type="number" value="0">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label for="example-text-input" class="col-sm-4 col-form-label font-size-14">Tới:</label>
                                        <div class="col-sm-8">
                                            <input class="form-control myInputNoBorder" type="number">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label for="example-text-input" class="col-sm-4 col-form-label font-size-14">Bắt đầu:</label>
                                        <div class="col-sm-8">
                                            <input class="form-control myInputNoBorder" type="date" placeholder="Ngày sinh">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label for="example-text-input" class="col-sm-4 col-form-label font-size-14">Kết thúc:</label>
                                        <div class="col-sm-8">
                                            <input class="form-control myInputNoBorder" type="date" placeholder="Ngày sinh">
                                        </div>
                                    </div>
                                </ul>
                            </li>
                            <li>
                                <a class="has-arrow waves-effect">
                                    <span>Nợ hiện tại </span>
                                </a>
                                <ul class="sub-menu" style="padding: 0 10px 0 30px;">
                                    <div class="row">
                                        <label for="example-text-input" class="col-sm-4 col-form-label font-size-14">Từ:</label>
                                        <div class="col-sm-8">
                                            <input class="form-control myInputNoBorder" type="number" value="0">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label for="example-text-input" class="col-sm-4 col-form-label font-size-14">Tới:</label>
                                        <div class="col-sm-8">
                                            <input class="form-control myInputNoBorder" type="number">
                                        </div>
                                    </div>
                                </ul>
                            </li>
                            <li>
                                <a class="has-arrow waves-effect">
                                    <span>Lựa chọn hiển thị </span>
                                </a>
                                <ul class="sub-menu" style="padding: 0 10px 0 30px;">
                                    <input class="form-check-input" style="margin-bottom: 10px;" type="radio" checked name="typeKH">&ensp; Tất cả <br/>
                                    <input class="form-check-input" style="margin-bottom: 10px;" type="radio" name="typeKH">&ensp; Đang hoạt động<br/>
                                    <input class="form-check-input" style="margin-bottom: 10px;" type="radio" name="typeKH">&ensp; Ngưng hoạt động<br/>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <!-- Sidebar -->
                </div>
                <div class="card-body">
                    <div id="morris-donut-example" class="dash-chart morris-charts text-center"></div>
                </div>
            </div>
        </div>
        <div class="col-lg-9" id="rightKH">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="mt-0 header-title">Top 10 sản phẩm bán chạy trong tháng</h4>
                                    <input type="month">
                                    <div class="table-responsive mt-4">
                                        <table class="table table-hover mb-0">
                                            <thead>
                                            <tr>
                                                <th scope="col">Top</th>
                                                <th scope="col">Hình ảnh</th>
                                                <th scope="col">Tên sản phẩm</th>
                                                <th scope="col">Mã sản phẩm</th>
                                                <th scope="col">Giá</th>
                                                <th scope="col">Tổng tiền bán</th>
                                                <th scope="col">Tổng số lượng bán</th>
                                            </tr>
                                            </thead>
                                            <tbody id="topProductSaleByMonth">


                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <h1 class="header-title mb-4">
                            <i class="mdi mdi-menu" style="font-size: 16pt;" onclick="editMenuKH();"></i> &ensp;Đối tác giao hàng
                        </h1>
                        <div class="row gap-2">
                            <div class="col-auto p-0 dropdown myDropdown myBtn" style="margin-left: 30px;">
                                <button class="btn btn-primary" id="dropdownMenuButton"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-filter"></i>
                                    <i class="mdi mdi-chevron-down"></i>
                                </button>
                                <div class="dropdown-menu dropdown-menu-end" style="width: 650%;">
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="loc">
                                                <input class="form-check-input" type="checkbox"> Mã đối tác
                                            </div>
                                            <div class="loc">
                                                <input class="form-check-input" type="checkbox"> Tên đối tác
                                            </div>
                                            <div class="loc">
                                                <input class="form-check-input" type="checkbox"> Điện
                                                thoại
                                            </div>
                                            <div class="loc">
                                                <input class="form-check-input" type="checkbox"> Email
                                            </div>
                                            <div class="loc">
                                                <input class="form-check-input" type="checkbox">
                                                Tổng đơn hàng
                                            </div>

                                        </div>
                                        <div class="col-lg-6">
                                            <div class="loc">
                                                <input class="form-check-input" type="checkbox"> Cần thu hộ
                                            </div>
                                            <div class="loc">
                                                <input class="form-check-input" type="checkbox"> Tổng trọng lượng
                                            </div>
                                            <div class="loc">
                                                <input class="form-check-input" type="checkbox"> Nợ cần trả hiện tại
                                            </div>
                                            <div class="loc">
                                                <input class="form-check-input" type="checkbox"> Tổng phí giao hàng
                                            </div>
                                            <div class="loc">
                                                <input class="form-check-input" type="checkbox"> Trạng
                                                thái
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button class="col-auto btn btn-primary myBtn"><i class="fas fa-file-export"></i> Export</button>
                            <button class="col-auto btn btn-primary myBtn"><i class="fas fa-file-import"></i> Import</button>
                            <button class="col-auto btn btn-primary myBtn" onclick="onModalAddDTGH()"><b>+ Thêm đối tác</b></button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-body">
                                    <table id="datatable-buttons"
                                           class="table table-striped table-bordered dt-responsive nowrap"
                                           style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                        <thead>
                                        <tr>
                                            <th><input class="form-check-input" type="checkbox">
                                            </th>
                                            <th>Mã đối tác</th>
                                            <th>Tên đối tác</th>
                                            <th>Số điện thoại</th>
                                            <th>Tổng đơn hàng</th>
                                            <th>Nợ cần trả hiện tại</th>
                                            <th>Tổng phí giao hàng</th>
                                        </tr>
                                        </thead>
                                        <tbody id="dataTest">
                                        <tr onclick="onModalDTGH()">
                                            <td><input class="form-check-input" type="checkbox">
                                            </td>
                                            <td>Tiger Nixon</td>
                                            <td>System Architect</td>
                                            <td>Edinburgh</td>
                                            <td>61</td>
                                            <td>2011/04/25</td>
                                            <td>$320,800</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div id="morris-bar-stacked" class="morris-chart-height morris-charts"></div> -->
                </div>
            </div>
        </div>
    </div>
    <script>
        let now = new Date()
        console.log(now.getFullYear())
        console.log(now.getMonth()+1)
        getTopProductSaleByMonth((now.getMonth()+1),now.getFullYear())
        function getTopProductSaleByMonth(month, year){
            $.ajax({
                url: '/top-product-sale?top='+10+'&month=' + month + '&year=' + year,
                success: function (datas) {
                    let topProductSaleByMonth = document.getElementById("topProductSaleByMonth")
                    topProductSaleByMonth.innerHTML = ''
                    for(let data of datas){
                        topProductSaleByMonth.innerHTML +=
                            '<tr>\n' +
                            '                                                <th scope="row">'+(datas.indexOf(data) + 1)+'</th>\n' +
                            '                                                <td>\n' +
                            '                                                    <div>\n' +
                            '                                                        <img src="'+data.image+'" alt="" class="avatar-xs rounded-circle me-2"> Rafael Reardon\n' +
                            '                                                    </div>\n' +
                            '                                                </td>\n' +
                            '                                                <td>'+data.name+'</td>\n' +
                            '                                                <td>'+data.productCode+'</span></td>\n' +
                            '                                                <td>'+data.price+'</td>\n' +
                            '                                                <td>'+data.totalAmount.toLocaleString('vi-VN') + 'đ'+'</td>\n' +
                            '                                                <td>'+data.totalQuantity+'</td>\n' +

                            '                                            </tr>'
                    }

                },
                error: function (error) {
                    console.log(error)
                }
            })
        }
    </script>
</div>
</body>
</html>